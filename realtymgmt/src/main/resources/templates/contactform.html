<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org">
<head>
    <title>Assign Contact</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<script>
	function formsubmit(num) {
		document.getElementById("tid").value=document.getElementById("taskId"+num).value;
		document.getElementById("cid").value=document.getElementById("contactId"+num).value;
		document.getElementById("form1").submit();
	}
	</script>
</head>
<body>
	<h2>Welcome <span th:text="${task.owner.ownerName}">Owner</span></h2>
	<h3>Task Details</h3>
	<table cellpadding="5" cellspacing="5">
		<tr>
		<td>Task Name</td><td th:text="${task.taskName}">task name</td>
		</tr>	
		<tr>
		<td>Task Description</td><td th:text="${task.taskDescription}">task Description</td>
		</tr>
		<tr>
		<td>Task Status</td><td th:text="${task.taskStatus}">task Status</td>
		</tr>
		<tr>
		<td>Task Created Date</td><td th:text="${task.taskCreateddate}">task Created Date</td>
		</tr>
		<tr>
		<td>Task Created By (Tenant Name)</td><td th:text="${task.tenant.tenantName}">tenant name</td>
		</tr>
	</table>
	<br/><br/>
	<h3>Assign a contact from the below list to the above task</h3>
    
    	<table cellpadding="5" cellspacing="5">
			<tr>
				<th>Contact Name</th>
				<th>Services Offered</th>
			</tr>				
			<tr th:each="contact, cstat: ${contacts}">
				<td th:text="${contact.contactName}">contact name</td>
				<td th:text="${contact.servicesOffered}">services offered</td>
				<td>					
					<input type="hidden" th:id="'taskId'+${cstat.index}" th:value="${task.taskId}" />
					<input type="hidden" th:id="'contactId'+${cstat.index}" th:value="${contact.contactId}" />
					<input type="button" th:onclick="'formsubmit('+${cstat.index}+')'" value="Assign" />
				</td>
			</tr>						
	    </table>
	    <form id="form1" action="#" th:action="@{/owner/updatetask}" method="post">
	    	<input type="hidden" id="tid" name="taskId" value="" />
			<input type="hidden" id="cid" name="contactId" value="" />
	    </form>
    <a th:href="@{'/owner/home?email='+${task.tenant.owner.user.emailAddress}}">go back</a>
</body>
</html>